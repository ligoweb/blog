---
title: canvas
date: 2016-12-20 11:14:55
tags: [HTML5,canvas]
---
## 什么是canvas?

HTML5中新加入了<canvas\>元素标签用户图形的绘制，借助于javascript可以完成许多复杂图形的绘制工作。
使用canvas可以从以下几个步骤入手：

## 1、创建一个画布

通过在html中加入下列代码：

```
<canvas id='myCanvas'></canvas>
```

就可以建立一个画布canvas画布

## 2、javascript引入canvas绘图API

```
var cav =document.getElementById('myCanvas');           //通过id获取canvas对象
var ctx=c.getContext('2d');//创建context，该对象为H5内置对象，拥有绘制API方法
cav.width=300;                                          //指定画布的宽度
cav.heigth=300;                                         //指定画布的高度
```


<!-- more -->

## 3、绘制路径

在canvas画布中我们可以使用以下法进行路径线条的绘制：

- moveTo(x,y)           

> 定义绘制线条的开始坐标

- lineTo(x,y)           

> 定义绘制线条的结束坐标

- stroke()              

> 调用绘制方法进行绘制

> 例

```
ctx.moveTo(100,100);            //定于开始坐标
ctx.lineTo(100,200);            //定义结束坐标
ctx.lineWidth=2;                //定义线条宽度
ctx.strokeStyle="#ffaadd";      //定义线条颜色
ctx.stroke();                   //开始绘制
```

执行上述JS代码就会在画布上绘制一条直线，宽度为2px,线条颜色为粉红色

<!-- ![](/images/canvas-01.png) -->
{% asset_img canvas-01.png png01 %}

## 4、绘制弧形

我们可以使用

- arc(x,y,r,sAngle,eAngle,boole)   

x,y为弧形中心坐标，r会弧形半径，sAngle为绘制起始弧度角，eAngle为绘制结束弧度角，boole为可选参数，默认为false,顺时针绘制，设置true后将逆时针绘制。

> 例

```
ctx.art(100,100,100,0,2*Math.PI);           //定义弧形绘制参数       
ctx.lineWidth=5;                            //定义线条宽度
ctx.strokeStyle="#ffaadd";                  //定义线条颜色
ctx.stroke();                               //开始绘制
```

执行上述JS代码就会在画布上绘制一个半径为100，线宽为5px,线条颜色为粉红色的圆。

{% asset_img canvas-02.png png02 %}

## 5、绘制多个图形

我们可以使用

- beginPath()

> 该方法为重新起始一条绘制路径

> 例

```
ctx.moveTo(50,100);
ctx.lineTo(50,200);
ctx.lineWidth=10;
ctx.strokeStyle="#ffaa33";
ctx.stroke();
//绘制一条直线

ctx.beginPath();  //重新起始一个绘制点

ctx.arc(150,150,50,0,2*Math.PI);
ctx.lineWidth=5;
ctx.strokeStyle="#ffaadd";
ctx.stroke();
//绘制一个圆
```

{% asset_img canvas-03.png png03 %}

## 6、进行颜色填充

可以使用

- fillStyle         

> 定义填充的样式，包括颜色、渐变或模式

- fill()            

>绘制完成后进行填充

> 例

```
ctx.moveTo(50,100);
ctx.lineTo(50,200);
ctx.lineWidth=10;
ctx.strokeStyle="#ffaa33";
ctx.stroke();
//绘制一条直线

ctx.beginPath();  //重新起始一个绘制点

ctx.arc(150,150,50,0,2*Math.PI);
ctx.lineWidth=10;
ctx.strokeStyle="#ffaadd";
ctx.stroke();
//绘制一个圆
ctx.fillStyle="#0000ff";              //定义填充的颜色
ctx.fill();                           //开始填充

```

{% asset_img canvas-04.png png04 %}

## 7、创建渐变

可以使用

- createLinearGradient(x0,y0,x1,y1)              

> 创建线性渐变,x0,y0为渐变起始点坐标，x1,y1为渐变结束点坐标

- createRadialGradient(x0,y0,r0,x1,y1,r1)        

> 创建径向渐变,x0,y0,r0为渐变开始的圆的坐标及半径，x1,y1,r1为渐变结束的圆的坐标及半径

- addColorStop(stop,color)                       

> 定义渐变位置及颜色stop为渐变的位置，介于0-1的数字，color为当前位置的颜色，可以设置多个addColoStop()方法以实现多种颜色之间的渐变

> 例

```
var cav=document.getElementById('canvas');                //获取canvas对象
var ctx=canvas.getContext('2d');                          //引入canvasAPI
var clg=ctx.createLinearGradient(50,50,50,200);           //创建线性渐变
clg.addColorStop(0,"#0a00b2");                            //0%位置的渐变颜色
clg.addColorStop(0.5,"#ff0000");                          //50%位置的渐变颜色
clg.addColorStop(1,"#fffc00");                            //100%位置的渐变颜色
var crg=ctx.createRadialGradient(150,150,10,150,150,40);  //创建径向渐变
crg.addColorStop(0,"red");                                //0%位置的渐变颜色
crg.addColorStop(1,"white");                              //100%位置的渐变颜色

cav.width=300;                                            //设置画布宽度
cav.height=300;                                           //设置画布高度      

ctx.moveTo(50,50);                                        //设置画笔起点 
ctx.lineTo(50,200);                                       //设置画笔终点
ctx.lineWidth=10;                                         //设置画笔大小
ctx.strokeStyle=clg;                                      //设置渐变方式
ctx.stroke();                                             //开始绘制

ctx.beginPath();                                          //开始另一个画笔起点
ctx.arc(150,150,50,0,2*Math.PI);                          //设置弧形参数  
ctx.lineWidth=10;                                         //设置画笔大小
ctx.strokeStyle="#ffaadd";                                //设置画笔颜色
ctx.stroke();                                             //开始绘制
ctx.fillStyle=crg;                                        //设置填充渐变方式
ctx.fill();                                               //开始填充
```

{% asset_img canvas-05.png png05 %}

这些基本的方法就可以满足我们一些简单的图形绘制了，但是还有许多复杂的绘制API，利用这些方法我们还可以绘制更加复杂的图形，更多方法可以参考[W3C规范](http://www.w3school.com.cn/)